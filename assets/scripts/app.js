(()=>{var l=canvas={el:document.getElementById("canvas"),init:function(){this.ctx=this.el.getContext("2d",{alpha:!0}),this.resize(),window.addEventListener("resize",this.resize.bind(this),!1)},resize:function(){this.el.width=this.el.clientWidth,this.el.height=this.el.clientHeight},draw:function(){this.ctx.clearRect(0,0,this.el.width,this.el.height)}};var g=!1,v=!0,S=0,T=0,L=!1,y=!1;function C(e){v=e}var z=()=>{};function B(e){z=e}window.addEventListener("keydown",e=>{e.key=="Escape"&&(g=!g),e.key=="Enter"&&z(),e.key=="Control"&&(y=!0)});window.addEventListener("keyup",e=>{e.key=="Control"&&(y=!1)});window.addEventListener("mousedown",e=>{L=!0});window.addEventListener("mouseup",e=>{L=!1});window.addEventListener("mousemove",e=>{S=e.pageX,T=e.pageY});var X=`${location.pathname.split("/").slice(1,-1).join("/")}/assets`,U=`${X}/images/icons/options.svg`,j=`${X}/images/icons/delete.svg`,b={el:document.getElementById("play-btn"),state:!1,init:function(){this.textEl=this.el.querySelector(".btn_text"),this.el.addEventListener("click",e=>{this.state?this.pause():this.play()})},play:function(){this.state=!0,this.textEl.innerText="Pause",C(!1)},pause:function(){this.state=!1,this.textEl.innerText="Play",C(!0)}},Y={el:document.getElementById("options-btn"),containerEl:document.getElementById("options-container"),state:!1,init:function(){this.imgEl=this.el.querySelector("img"),this.el.addEventListener("click",e=>{this.state?this.close():this.open()})},open:function(){this.state=!0,this.containerEl.classList.remove("hide"),this.imgEl.src=j},close:function(){this.state=!1,this.containerEl.classList.add("hide"),this.imgEl.src=U}},D={el:document.getElementById("next-btn"),init:function(){this.el.addEventListener("click",e=>{q()})}},G=null,J=60,$=1e3/J,M=!1,P=null,A=null,R=null,E=150,w=50,i=H(E,w),K="#F65946",N="#FFFFFF88",s,f,d,p,m;i[0][1]=1;i[1][1]=1;i[2][1]=1;i[5][10]=1;i[6][10]=1;i[7][11]=1;i[4][12]=1;i[5][13]=1;i[6][13]=1;i[9][19]=1;i[8][18]=1;i[10][17]=1;i[10][18]=1;i[10][19]=1;i[47][98]=1;i[48][98]=1;i[49][98]=1;b.init();Y.init();D.init();l.init();B(()=>{v?b.play():b.pause()});window.addEventListener("resize",I,!1);I();W();R=performance.now();k(R);function I(){s=Math.floor(Math.min(l.el.width/E,l.el.height/w)),f=Math.floor(l.el.width/2-E/2*s),d=Math.floor(l.el.height/2-w/2*s),p=E*s+f,m=w*s+d}function k(e){A=requestAnimationFrame(k);let o=e-R;if(R=e,M||P<$){l.draw(),i.forEach((u,h)=>{u.forEach((x,F)=>{x&&(l.ctx.fillStyle=K,l.ctx.fillRect(f+F*s,d+h*s,s,s))})});let c=l.el.getBoundingClientRect(),r=S-c.left-window.scrollX-f,n=T-c.top-window.scrollY-d;if(r>0&&r<p-f&&n>0&&n<m-d&&!Y.state){let u=Math.floor(r/s),h=Math.floor(n/s),x=f+u*s,F=d+h*s;l.ctx.fillStyle=N,l.ctx.fillRect(x,F,s,s),L&&(y?i[h][u]=0:i[h][u]=1)}let t=2,a=s+t;if(l.ctx.fillStyle="#FFFFFF",l.ctx.fillRect(f-t,d-t,a,t),l.ctx.fillRect(f-t,d-t,t,a),l.ctx.fillRect(p+t-a,d-t,a,t),l.ctx.fillRect(p,d-t,t,a),l.ctx.fillRect(f-t,m,a,t),l.ctx.fillRect(f-t,m-a+t,t,a),l.ctx.fillRect(p,m-a+t,t,a),l.ctx.fillRect(p-a+t,m,a,t),g){let u=Math.round(1e3/o),h=Math.floor(r/s),x=Math.floor(n/s);l.ctx.fillStyle="#fff",l.ctx.font="16px sans-serif",l.ctx.fillText(`fps: ${u}`,10,30),l.ctx.fillText(`looptime: ${P}`,10,60),l.ctx.fillText(`mouse: ${r}, ${n}`,10,90),l.ctx.fillText(`index: ${h}, ${x}`,10,120)}}}function W(){G=setTimeout(function(){if(!v){A||k(performance.now()),M=!1;let e=performance.now();q(),P=performance.now()-e,M=!0}W()},$)}function q(){let e=H(E,w);i.forEach((o,c)=>{o.forEach((r,n)=>{let t=O(n,c,i);r?t!=2&&t!=3||(e[c][n]=1):t==3&&(e[c][n]=1)})}),i=e}function H(e,o){let c=[];for(let r=0;r<o;r++){let n=[];for(let t=0;t<e;t++)n.push(0);c.push(n)}return c}function O(e,o,c){let r=0,n={1:[e-1,o-1],2:[e,o-1],3:[e+1,o-1],4:[e-1,o],5:[e+1,o],6:[e-1,o+1],7:[e,o+1],8:[e+1,o+1]};e-1>=0||(delete n[1],delete n[4],delete n[6]),e+1<c[o].length||(delete n[3],delete n[5],delete n[8]),o-1>=0||(delete n[1],delete n[2],delete n[3]),o+1<c.length||(delete n[6],delete n[7],delete n[8]);for(let t in n)c[n[t][1]][n[t][0]]&&r++;return r}})();

(()=>{var n=canvas={el:document.getElementById("canvas"),init:function(){this.ctx=this.el.getContext("2d",{alpha:!0}),this.resize(),window.addEventListener("resize",this.resize.bind(this),!1)},resize:function(){this.el.width=this.el.clientWidth,this.el.height=this.el.clientHeight},draw:function(){this.ctx.clearRect(0,0,this.el.width,this.el.height)}};var g=!1,v=!0,S=0,T=0,L=!1,y=!1;function C(e){v=e}var B=()=>{};function X(e){B=e}window.addEventListener("keydown",e=>{e.key=="Escape"&&(g=!g),e.key=="Enter"&&B(),e.key=="Control"&&(y=!0)});window.addEventListener("keyup",e=>{e.key=="Control"&&(y=!1)});window.addEventListener("mousedown",e=>{L=!0});window.addEventListener("mouseup",e=>{L=!1});window.addEventListener("mousemove",e=>{S=e.pageX,T=e.pageY});var k=`${location.pathname.split("/").slice(1,-1).join("/")}/assets`;console.log(k);var U=`${k}/images/icons/options.svg`,j=`${k}/images/icons/delete.svg`,b={el:document.getElementById("play-btn"),state:!1,init:function(){this.textEl=this.el.querySelector(".btn_text"),this.el.addEventListener("click",e=>{this.state?this.pause():this.play()})},play:function(){this.state=!0,this.textEl.innerText="Pause",C(!1)},pause:function(){this.state=!1,this.textEl.innerText="Play",C(!0)}},Y={el:document.getElementById("options-btn"),containerEl:document.getElementById("options-container"),state:!1,init:function(){this.imgEl=this.el.querySelector("img"),this.el.addEventListener("click",e=>{this.state?this.close():this.open()})},open:function(){this.state=!0,this.containerEl.classList.remove("hide"),this.imgEl.src=j},close:function(){this.state=!1,this.containerEl.classList.add("hide"),this.imgEl.src=U}},D={el:document.getElementById("next-btn"),init:function(){this.el.addEventListener("click",e=>{q()})}},G=null,J=60,$=1e3/J,M=!1,P=null,A=null,R=null,E=150,w=50,i=H(E,w),K="#F65946",N="#FFFFFF88",s,f,d,p,m;i[0][1]=1;i[1][1]=1;i[2][1]=1;i[5][10]=1;i[6][10]=1;i[7][11]=1;i[4][12]=1;i[5][13]=1;i[6][13]=1;i[9][19]=1;i[8][18]=1;i[10][17]=1;i[10][18]=1;i[10][19]=1;i[47][98]=1;i[48][98]=1;i[49][98]=1;b.init();Y.init();D.init();n.init();X(()=>{v?b.play():b.pause()});window.addEventListener("resize",I,!1);I();W();R=performance.now();z(R);function I(){s=Math.floor(Math.min(n.el.width/E,n.el.height/w)),f=Math.floor(n.el.width/2-E/2*s),d=Math.floor(n.el.height/2-w/2*s),p=E*s+f,m=w*s+d}function z(e){A=requestAnimationFrame(z);let o=e-R;if(R=e,M||P<$){n.draw(),i.forEach((u,h)=>{u.forEach((x,F)=>{x&&(n.ctx.fillStyle=K,n.ctx.fillRect(f+F*s,d+h*s,s,s))})});let c=n.el.getBoundingClientRect(),r=S-c.left-window.scrollX-f,l=T-c.top-window.scrollY-d;if(r>0&&r<p-f&&l>0&&l<m-d&&!Y.state){let u=Math.floor(r/s),h=Math.floor(l/s),x=f+u*s,F=d+h*s;n.ctx.fillStyle=N,n.ctx.fillRect(x,F,s,s),L&&(y?i[h][u]=0:i[h][u]=1)}let t=2,a=s+t;if(n.ctx.fillStyle="#FFFFFF",n.ctx.fillRect(f-t,d-t,a,t),n.ctx.fillRect(f-t,d-t,t,a),n.ctx.fillRect(p+t-a,d-t,a,t),n.ctx.fillRect(p,d-t,t,a),n.ctx.fillRect(f-t,m,a,t),n.ctx.fillRect(f-t,m-a+t,t,a),n.ctx.fillRect(p,m-a+t,t,a),n.ctx.fillRect(p-a+t,m,a,t),g){let u=Math.round(1e3/o),h=Math.floor(r/s),x=Math.floor(l/s);n.ctx.fillStyle="#fff",n.ctx.font="16px sans-serif",n.ctx.fillText(`fps: ${u}`,10,30),n.ctx.fillText(`looptime: ${P}`,10,60),n.ctx.fillText(`mouse: ${r}, ${l}`,10,90),n.ctx.fillText(`index: ${h}, ${x}`,10,120)}}}function W(){G=setTimeout(function(){if(!v){A||z(performance.now()),M=!1;let e=performance.now();q(),P=performance.now()-e,M=!0}W()},$)}function q(){let e=H(E,w);i.forEach((o,c)=>{o.forEach((r,l)=>{let t=O(l,c,i);r?t!=2&&t!=3||(e[c][l]=1):t==3&&(e[c][l]=1)})}),i=e}function H(e,o){let c=[];for(let r=0;r<o;r++){let l=[];for(let t=0;t<e;t++)l.push(0);c.push(l)}return c}function O(e,o,c){let r=0,l={1:[e-1,o-1],2:[e,o-1],3:[e+1,o-1],4:[e-1,o],5:[e+1,o],6:[e-1,o+1],7:[e,o+1],8:[e+1,o+1]};e-1>=0||(delete l[1],delete l[4],delete l[6]),e+1<c[o].length||(delete l[3],delete l[5],delete l[8]),o-1>=0||(delete l[1],delete l[2],delete l[3]),o+1<c.length||(delete l[6],delete l[7],delete l[8]);for(let t in l)c[l[t][1]][l[t][0]]&&r++;return r}})();
